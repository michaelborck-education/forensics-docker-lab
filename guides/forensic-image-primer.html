<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Primer: Working with E01 Images</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: fadeInDown 0.8s ease;
        }
        
        .subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .content {
            padding: 2rem;
        }
        
        h2 {
            color: #667eea;
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #667eea;
            position: relative;
        }
        
        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .info-box:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .workflow-section {
            margin: 2rem 0;
        }
        
        .workflow-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            transition: all 0.3s ease;
        }
        
        .workflow-card:hover {
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.15);
        }
        
        .workflow-card h3 {
            color: #764ba2;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .workflow-icon {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            position: relative;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }
        
        .copy-button:hover {
            background: #764ba2;
        }
        
        .copy-button.copied {
            background: #48bb78;
        }
        
        code {
            background: #f0f4f8;
            color: #e53e3e;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }
        
        ul {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        li {
            margin: 0.5rem 0;
            position: relative;
        }
        
        li::marker {
            color: #667eea;
        }
        
        .tab-container {
            margin: 2rem 0;
        }
        
        .tab-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .tab-button {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            color: #64748b;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-button:hover {
            color: #667eea;
        }
        
        .tab-button.active {
            color: #667eea;
            font-weight: 600;
        }
        
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }
        
        .tab-content {
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .tip-box {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .tip-box::before {
            content: 'üí°';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 100px;
            opacity: 0.1;
        }
        
        .tip-box h3 {
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }
        
        .interactive-demo {
            background: #f0f4f8;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }
        
        .demo-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        #demo-output {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            display: none;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .progress-indicator {
            width: 100%;
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            width: 0%;
            transition: width 1s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Working with E01 Images</h1>
            <p class="subtitle">Your Complete Guide to Forensic Image Analysis</p>
        </header>
        
        <div class="content">
            <div class="info-box">
                <h2>What is E01?</h2>
                <ul>
                    <li><strong>Industry Standard:</strong> EnCase Expert Witness format - the gold standard in digital forensics</li>
                    <li><strong>Complete Copy:</strong> Bit-for-bit copy of original media with embedded metadata</li>
                    <li><strong>Built-in Integrity:</strong> Contains MD5/SHA hashes for verification</li>
                    <li><strong>Wide Support:</strong> Compatible with Autopsy, FTK, EnCase, X-Ways, and Sleuth Kit</li>
                    <li><strong>Compression:</strong> Built-in compression reduces storage requirements</li>
                </ul>
            </div>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="showTab('gui')">GUI Workflow</button>
                    <button class="tab-button" onclick="showTab('cli')">CLI Workflow</button>
                    <button class="tab-button" onclick="showTab('comparison')">Comparison</button>
                </div>
                
                <div id="gui" class="tab-content active">
                    <div style="padding: 1rem; margin-bottom: 1.5rem; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px;">
                        <strong>‚ö†Ô∏è Prerequisites: Autopsy Must Be Enabled First</strong>
                        <p style="margin-top: 0.5rem;">Autopsy GUI is <strong>disabled by default</strong>. Before following this workflow, you must enable it:</p>
                        <ol style="margin-top: 0.5rem; margin-left: 1.5rem;">
                            <li>See <strong>README.md ‚Üí "Optional: Enabling Autopsy GUI"</strong> section</li>
                            <li>Uncomment autopsy service in docker-compose.yml</li>
                            <li>Run: <code>docker compose build autopsy</code></li>
                            <li>Run: <code>docker compose up -d autopsy</code></li>
                        </ol>
                        <p style="margin-top: 0.5rem;"><em>Note: CLI workflow below works out-of-the-box and is sufficient for all lab tasks.</em></p>
                    </div>

                    <div class="workflow-card">
                        <h3><span class="workflow-icon">1</span> Access Autopsy</h3>
                        <p>Open your browser and navigate to:</p>
                        <pre><code>http://localhost:8080/vnc.html</code><button class="copy-button" onclick="copyCode(this)">Copy</button></pre>
                        <p style="margin-top: 1rem; padding: 0.75rem; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">
                            <strong>üí° Screen Size Tip:</strong> If the window is too large/small for your laptop, click the sidebar toggle (left edge) and select <strong>Scaling Mode ‚Üí Remote Resizing</strong> or <strong>Local Scaling</strong> to auto-fit your screen. You can also customize the resolution in the <code>.env</code> file (see README troubleshooting).
                        </p>
                    </div>

                    <div class="workflow-card">
                        <h3><span class="workflow-icon">2</span> Create New Case</h3>
                        <ul>
                            <li>Click <code>New Case</code></li>
                            <li>Enter case name (e.g., "Cloudcore_Investigation")</li>
                            <li>Select case directory</li>
                            <li>Add investigator details</li>
                        </ul>
                    </div>
                    
                    <div class="workflow-card">
                        <h3><span class="workflow-icon">3</span> Add Data Source</h3>
                        <ul>
                            <li>Select <code>Add Data Source</code></li>
                            <li>Choose <code>Disk Image or VM File</code></li>
                            <li>Browse to your <code>.E01</code> file</li>
                            <li>Autopsy automatically processes E01 format</li>
                        </ul>
                    </div>
                    
                    <div class="workflow-card">
                        <h3><span class="workflow-icon">4</span> Run Ingest Modules</h3>
                        <ul>
                            <li>Select modules: Hash Lookup, Keyword Search, File Type ID</li>
                            <li>Configure keyword lists</li>
                            <li>Start ingest process</li>
                        </ul>
                    </div>
                </div>
                
                <div id="cli" class="tab-content">
                    <div class="workflow-card">
                        <h3><span class="workflow-icon">1</span> Mount E01 Image</h3>
                        <p>Sleuth Kit requires raw images, so we use ewfmount to access the E01 file:</p>
                        <pre><code># Mount the E01 image
docker compose run --rm dfir ewfmount /evidence/cloudcore_suspect_usb.E01 /tmp/ewf

# Verify mount
ls /tmp/ewf   # Should show: ewf1</code><button class="copy-button" onclick="copyCode(this)">Copy</button></pre>
                    </div>
                    
                    <div class="workflow-card">
                        <h3><span class="workflow-icon">2</span> List Files (Including Deleted)</h3>
                        <pre><code># List all files recursively, including deleted
docker compose run --rm dfir fls -r -d /tmp/ewf/ewf1 > cases/file_list.txt

# View file system statistics
docker compose run --rm dfir fsstat /tmp/ewf/ewf1</code><button class="copy-button" onclick="copyCode(this)">Copy</button></pre>
                    </div>
                    
                    <div class="workflow-card">
                        <h3><span class="workflow-icon">3</span> Recover Specific Files</h3>
                        <pre><code># Recover a specific file by inode
docker compose run --rm dfir icat /tmp/ewf/ewf1 [inode] > recovered_file

# Batch recover all deleted files
docker compose run --rm dfir tsk_recover -e /tmp/ewf/ewf1 /cases/recovered/</code><button class="copy-button" onclick="copyCode(this)">Copy</button></pre>
                    </div>
                </div>
                
                <div id="comparison" class="tab-content">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f0f4f8;">
                                <th style="padding: 1rem; text-align: left; border-bottom: 2px solid #667eea;">Feature</th>
                                <th style="padding: 1rem; text-align: left; border-bottom: 2px solid #667eea;">Autopsy (GUI)</th>
                                <th style="padding: 1rem; text-align: left; border-bottom: 2px solid #667eea;">Sleuth Kit (CLI)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;"><strong>E01 Support</strong></td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">‚úÖ Direct support</td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">‚ö†Ô∏è Requires ewfmount first</td>
                            </tr>
                            <tr>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;"><strong>Learning Curve</strong></td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Easy - Visual interface</td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Moderate - Command knowledge</td>
                            </tr>
                            <tr>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;"><strong>Speed</strong></td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Slower - GUI overhead</td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Faster - Direct commands</td>
                            </tr>
                            <tr>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;"><strong>Automation</strong></td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Limited</td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Excellent - Scriptable</td>
                            </tr>
                            <tr>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;"><strong>Best For</strong></td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Initial analysis, visualization</td>
                                <td style="padding: 1rem; border-bottom: 1px solid #e2e8f0;">Batch processing, scripting</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="tip-box">
                <h3>üîë Key Tip</h3>
                <ul style="margin-top: 1rem;">
                    <li><strong>Autopsy:</strong> Use for initial exploration and visual analysis - no mounting required!</li>
                    <li><strong>CLI Sleuth Kit:</strong> Perfect for automation and scripting - remember to ewfmount first!</li>
                    <li><strong>Best Practice:</strong> Use both tools to cross-verify your findings</li>
                </ul>
            </div>
            
            <div class="interactive-demo">
                <h3>üéØ Interactive Command Builder</h3>
                <p>Click to generate common Sleuth Kit commands:</p>
                <button class="demo-button" onclick="generateCommand('mount')">Mount E01</button>
                <button class="demo-button" onclick="generateCommand('list')">List Files</button>
                <button class="demo-button" onclick="generateCommand('recover')">Recover Deleted</button>
                <button class="demo-button" onclick="generateCommand('timeline')">Create Timeline</button>
                <div id="demo-output"></div>
            </div>
            
            <div class="progress-indicator">
                <div class="progress-bar" id="progress"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab functionality
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Copy code functionality
        function copyCode(button) {
            const pre = button.parentElement;
            const code = pre.querySelector('code') || pre;
            const text = code.textContent.replace('Copy', '').trim();
            
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            });
        }
        
        // Interactive command generator
        function generateCommand(type) {
            const output = document.getElementById('demo-output');
            let command = '';

            switch(type) {
                case 'mount':
                    command = '# Mount E01 image for CLI tools\n' +
                             'docker compose run --rm dfir ewfmount /evidence/cloudcore_suspect_usb.E01 /tmp/ewf\n' +
                             'ls /tmp/ewf  # Verify mount - should show ewf1';
                    break;
                case 'list':
                    command = '# List all files including deleted (-d) recursively (-r)\n' +
                             'docker compose run --rm dfir fls -r -d /tmp/ewf/ewf1 > cases/file_listing.txt\n\n' +
                             '# Filter for deleted files only\n' +
                             'grep "\\* " cases/file_listing.txt';
                    break;
                case 'recover':
                    command = '# Recover all deleted files to a directory\n' +
                             'docker compose run --rm dfir tsk_recover -e /tmp/ewf/ewf1 /cases/recovered/\n\n' +
                             '# Recover specific file by inode\n' +
                             'docker compose run --rm dfir icat /tmp/ewf/ewf1 [INODE] > recovered_file';
                    break;
                case 'timeline':
                    command = '# Generate timeline of file activity\n' +
                             'docker compose run --rm dfir fls -r -m / /tmp/ewf/ewf1 > body.txt\n' +
                             'docker compose run --rm dfir mactime -b body.txt -d > timeline.csv';
                    break;
            }
            
            output.style.display = 'block';
            output.textContent = command;
            
            // Animate progress bar
            const progress = document.getElementById('progress');
            progress.style.width = '0%';
            setTimeout(() => {
                progress.style.width = '100%';
            }, 100);
        }
        
        // Initialize progress bar on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('progress').style.width = '30%';
            }, 500);
        });
    </script>
</body>
</html>